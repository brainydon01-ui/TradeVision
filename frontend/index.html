<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TradeVision AI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #0b1220;
            color: #e5e7eb;
        }

        .container {
            max-width: 420px;
            margin: auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            margin: 0;
            color: #38bdf8;
        }

        .card {
            background: #020617;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }

        input[type="file"] {
            width: 100%;
            padding: 10px;
            background: #020617;
            color: #fff;
            border: 1px solid #1e293b;
            border-radius: 8px;
        }

        button {
            width: 100%;
            margin-top: 15px;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            background: #22c55e;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        button:hover {
            opacity: 0.9;
        }

        .signal-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }

        .buy {
            background: rgba(34, 197, 94, 0.15);
            border: 1px solid #22c55e;
        }

        .sell {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid #ef4444;
        }

        .signal-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .footer {
            margin-top: 20px;
            font-size: 12px;
            text-align: center;
            color: #94a3b8;
        }
    </style>
</head>

<body>

<div class="container">
    <div class="header">
        <h1>üìä TradeVision AI</h1>
        <p>AI Chart-Based Trade Assistant</p>
    </div>

    <div class="card">
        <input type="file" id="chart">
        <button onclick="analyze()">Analyze Chart</button>

        <div class="signal-box" id="signalBox">
            <div class="signal-title" id="signalTitle"></div>

            <div class="row"><span>Entry</span><span id="entry"></span></div>
            <div class="row"><span>Stop Loss</span><span id="sl"></span></div>
            <div class="row"><span>Take Profit</span><span id="tp"></span></div>
            <div class="row"><span>Risk‚ÄìReward</span><span id="rr"></span></div>
            <div class="row"><span>Time</span><span id="time"></span></div>
            <div class="row"><span>Confidence</span><span id="conf"></span></div>
        </div>
    </div>

    <div class="footer">
        ‚ö†Ô∏è Educational use only. Not financial advice.
    </div>
</div>

<script>
async function analyze() {
    const fileInput = document.getElementById("chart");
    if (!fileInput.files.length) {
        alert("Please upload a chart image");
        return;
    }

    const formData = new FormData();
    formData.append("file", fileInput.files[0]);

    const response = await fetch("http://127.0.0.1:8000/analyze-chart/", {
        method: "POST",
        body: formData
    });

    const data = await response.json();

    const box = document.getElementById("signalBox");
    const title = document.getElementById("signalTitle");

    box.style.display = "block";
    box.className = "signal-box " + (data.signal === "BUY" ? "buy" : "sell");

    title.innerText = data.signal;
    title.style.color = data.signal === "BUY" ? "#22c55e" : "#ef4444";

    document.getElementById("entry").innerText = data.entry;
    document.getElementById("sl").innerText = data.stop_loss;
    document.getElementById("tp").innerText = data.take_profit;
    document.getElementById("rr").innerText = data.risk_reward;
    document.getElementById("time").innerText = data.due_time;
    document.getElementById("conf").innerText = data.confidence;
}
</script>

</body>
</html>
